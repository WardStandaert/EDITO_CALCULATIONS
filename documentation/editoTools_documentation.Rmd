---
title: "Documentation editoTools"
output: html_document
date: "2024-07-01"
---

Hi, feel free to paste the documentation of your functions in here!

# enhanceDF()

**Description**\
Extracts specific environmental information from the data lake at specific coordinates of your data points.

**Arguments**

-   inputPoints: A dataframe of presences/absences with the columns "Latitude", "Longitude", and optionally "Time"
-   requestedParameters: A named list of parameters with each parameter containing named vector with info on "par" (required), "buffer", "fun", "category" and "convert_from_timestep" (optional). Only providing "par" simply extracts the value of the requested parameter at the closest Longitude, Latitude, Time and atDepth. The optional arguments allow for more complex queries (see details).
-   requestedTimeSteps: An integer in seconds specifying the temporal resolution (e.g 86400000 for daily)
-   stacCatalogue: A dataframe of the STAC Catalog, containing the URL's to the datasets and metadata information
-   verbose: Character of either "on" or "". When verbose = "on", columns *par*\_x, *par*\_y, *par_z, par*\_t are added to the output dataframe to show the location, depth and time where the environmental data was extracted from.
-   atDepth: A numerical indicating the requested depth from where to extract from. For each parameter in requestedParameters, the function extracts values at the depth layer of this parameter that is closest to atDepth.
-   select_layers: *Only to use on second iteration of the function.* A vector with integers indicating which product with length n (with n the number of parameters). This argument allows to predefine for every parameter which product you want to use in case when there are multiple options. When left empty, the function will ask user input for each layer where multiple products are available for the given parameter and range of longitude, latitude and time.

**Format**\
A dataframe.

**Details**\
Depends on the function `lookupParameter()`.

A buffer lookup can be done by providing a buffer value (in meters) for each parameter in requestedParameters and a function (fun) that is applied to this buffer. For example, buffer = 10000 and fun = "mean", will calculate the average value of a buffer of 10000 m around each point in inputPoints. Fun can be given any regular function such as "mean", "median", "min" or "max". For categorical variables, fun can be either "most_frequent" (derives the most frequent category in the buffer) or "exact". Exact can be used when a specific category is searched for (provided in "category") and will return the percentage area covered by the specified "category" in the buffer area.\
"convert_from_timestep" provides an option to derive data at a resolution that is coarser than the product listed in the catalogue. For example, with "requestedTimeSteps"=***NA*** "convert_from_timestep"=86400000, monthly values are extracted from a product that has a daily timestep in the data lake. Currently, only the conversion of daily to monthly data is implemented.

**Value**\
A dataframe consisting of the original inputPoints appended by columns of parameter values.

**Examples**

```{r, eval=FALSE}
parameters <- list("thetao"= c("par" = "thetao", "buffer" = "10000", "fun" = "mean"),
                   "so"= c("par" = "so", "buffer" = "10000", "fun" = "mean"),
                  "npp"= c("par" = "npp", "buffer" = "10000", "fun" = "mean","convert_from_timestep" = "86400000"))

df_occ_bg_env = enhanceDF(inputPoints = df_occs %>% 
                            mutate(Time = as.POSIXct(paste(year,month,1,sep = "-"))),
                          requestedParameters = parameters,
                          requestedTimeSteps = NA,
                          stacCatalogue = EDITOSTAC,
                          verbose="on",
                          select_layers=NULL)
```

# lookupParameter()

**Description**\
Gets as input a specific datalayer in the STAC (given by previous code in `enhanceDF()`), a specific parametername , the coordinates where to extract this value and optionally also a depth.

**Arguments**

-   dslist:
-   usePar:
-   pts:
-   atDepth:

**Format**\
A dataframe

**Details**\
Depends on the function `lookupParameter()`

**Value**\
A dataframe consisting of the original inputPoints appended by columns of parameter values.

**Examples**

```{r, eval=FALSE}

```
